<configuration
  xmlns="https://github.com/qoomon/maven-git-versioning-extension"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="https://github.com/qoomon/maven-git-versioning-extension
   https://qoomon.github.io/maven-git-versioning-extension/configuration-9.4.0.xsd">

  <refs considerTagsOnBranches="true">

    <!-- Matches a tag -->
    <ref type="tag">
      <pattern><![CDATA[(v)?(?<tagver>.+)]]></pattern>
      <version>${ref.tagver}</version>
      <properties>
        <original.version>${version}</original.version>
        <version.semantic.release>${ref.tagver}</version.semantic.release>
        <version.semantic>${ref.tagver}</version.semantic>
        <version.numeric>${ref.tagver}</version.numeric>
        <version.symbolic>redeploy-${ref.tagver}</version.symbolic>
        <scm.branch>${ref}</scm.branch>
        <!--<npm.project.version>${ref.tagver}</npm.project.version>-->
      </properties>
      <userProperties>
        <project.build.outputTimestamp>${commit.timestamp.iso}</project.build.outputTimestamp>
        <version.release>${ref.tagver}</version.release>
      </userProperties>
    </ref>

    <!-- Matches a restricted branch -->
    <ref type="branch">
      <pattern>main|lts-([0-9.]*)</pattern>
      <version>${version}</version>
      <properties>
        <original.version>${version}</original.version>
        <version.semantic.release>${version.core}</version.semantic.release>
        <version.semantic>${version}</version.semantic>
        <version.numeric>${version.core}</version.numeric>
        <version.symbolic>latest</version.symbolic>
        <scm.branch>${branch}</scm.branch>
      </properties>
      <userProperties>
        <!--
        <version.semantic.nexttrel>${version.major}.${version.minor}.${version.patch.next}</version.semantic.nexttrel>
        -->
        <project.build.outputTimestamp>${commit.timestamp.iso}</project.build.outputTimestamp>
        <version.release>${version.core}</version.release>
      </userProperties>
    </ref>

    <!-- Matches a development branch -->
    <ref type="branch">
      <pattern><![CDATA[(?<branch>.+)]]></pattern>
      <version>${ref.branch}-SNAPSHOT</version>
      <properties>
        <original.version>${version}</original.version>
        <version.semantic.release>${version.core}-${ref.branch}</version.semantic.release>
        <version.semantic>${version.core}-${ref.branch}-SNAPSHOT</version.semantic>
        <version.numeric>${version.core}</version.numeric>
        <version.symbolic>${ref.branch}</version.symbolic>
        <scm.branch>${ref.branch}</scm.branch>
      </properties>
      <userProperties>
        <project.build.outputTimestamp>${commit.timestamp.iso}</project.build.outputTimestamp>
        <version.release>${version.core}-${ref.branch}</version.release>
      </userProperties>
    </ref>
  </refs>

  <!-- Fallback -->
  <rev>
    <version>${version.core}-${commit}-SNAPSHOT</version>
    <properties>
      <original.version>${version}</original.version>
      <version.semantic.release>${version.core}-${commit}</version.semantic.release>
      <version.semantic>${version.core}-${commit}-SNAPSHOT</version.semantic>
      <version.numeric>${version.core}</version.numeric>
      <version.symbolic>${commit}</version.symbolic>
      <scm.branch>unknown</scm.branch>
    </properties>
    <userProperties>
      <project.build.outputTimestamp>${commit.timestamp.iso}</project.build.outputTimestamp>
      <version.release>${version.core}-${commit}</version.release>
    </userProperties>
  </rev>

</configuration>
